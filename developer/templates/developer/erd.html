{% extends "developer/base.html" %}

{% block title %}Boo Game ERD{% endblock %}

{% block header_title %}Boo Game ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° (ERD){% endblock %}
{% block header_subtitle %}Entity Relationship Diagram - ê²Œì„ ë°ì´í„°ë² ì´ìŠ¤ì˜ êµ¬ì¡° ë° ê´€ê³„ ì‹œê°í™”{% endblock %}

{% block extra_css %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/developer.css' %}">
<style>
    .erd-container {
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 10px;
        padding: 2rem;
        margin-bottom: 2rem;
        border-left: 4px solid #00DDFF;
    }
    
    .mermaid {
        background-color: #1a1a2e;
        padding: 2rem;
        border-radius: 8px;
        text-align: center;
        overflow-x: auto;
    }
    
    .section {
        margin-bottom: 2rem;
        padding: 1.5rem;
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 10px;
        border-left: 4px solid #00DDFF;
    }
    
    .section h2 {
        color: #00DDFF;
        margin-top: 0;
    }
    
    .table-card {
        background-color: #222;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .table-card h3 {
        color: #00DDFF;
        margin-top: 0;
        border-bottom: 1px solid #444;
        padding-bottom: 0.5rem;
    }
    
    .field-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    .field-list li {
        padding: 0.5rem 0;
        border-bottom: 1px dashed #333;
    }
    
    .field-list li:last-child {
        border-bottom: none;
    }
    
    .field-type {
        color: #FFD700;
        font-size: 0.9em;
        margin-left: 0.5rem;
    }
    
    .field-constraint {
        color: #00DDFF;
        font-size: 0.8em;
        border: 1px solid #00DDFF;
        padding: 0 0.5rem;
        border-radius: 4px;
        margin-left: 0.5rem;
    }
    
    .relationship-container {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    
    .relationship-card {
        flex: 1 1 300px;
        background-color: rgba(0, 221, 255, 0.1);
        border-radius: 8px;
        padding: 1rem;
        border: 1px solid rgba(0, 221, 255, 0.3);
    }
    
    .code-example {
        background-color: #111;
        border-radius: 5px;
        padding: 1rem;
        margin: 1rem 0;
        overflow-x: auto;
        font-family: 'Consolas', monospace;
    }
</style>
{% endblock %}

{% block content %}
<div class="erd-container">
    <h2>ë°ì´í„°ë² ì´ìŠ¤ ERD ë‹¤ì´ì–´ê·¸ë¨</h2>
    <p>ì•„ë˜ ë‹¤ì´ì–´ê·¸ë¨ì€ Boo Game ë°ì´í„°ë² ì´ìŠ¤ì˜ êµ¬ì¡°ì™€ í…Œì´ë¸” ê°„ì˜ ê´€ê³„ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
    
    <div style="background-color: rgba(255, 215, 0, 0.1); border-left: 4px solid #FFD700; padding: 1rem; margin: 1rem 0; border-radius: 5px;">
        <h4 style="color: #FFD700; margin-top: 0;">ğŸ’¡ ERDë€ ë¬´ì—‡ì¸ê°€ìš”?</h4>
        <p>ERD(Entity Relationship Diagram)ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ êµ¬ì¡°ë¥¼ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„í•œ ë‹¤ì´ì–´ê·¸ë¨ì…ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”(Entity)ê³¼ í…Œì´ë¸” ê°„ì˜ ê´€ê³„(Relationship)ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
        
        <h5 style="color: #e0e0e0;">ë‹¤ì´ì–´ê·¸ë¨ ì½ëŠ” ë°©ë²•</h5>
        <ul>
            <li><strong>ë°•ìŠ¤</strong>: ê° ë°•ìŠ¤ëŠ” ë°ì´í„° í…Œì´ë¸”(Entity)ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</li>
            <li><strong>ì„ </strong>: í…Œì´ë¸” ê°„ì˜ ê´€ê³„(Relationship)ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</li>
            <li><strong>||--o{</strong>: "ì¼ëŒ€ë‹¤(1:N)" ê´€ê³„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. í•˜ë‚˜ì˜ ë ˆì½”ë“œê°€ ì—¬ëŸ¬ ë ˆì½”ë“œì™€ ì—°ê²°ë¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</li>
            <li><strong>PK</strong>: Primary Key(ê¸°ë³¸ í‚¤)ë¡œ, ê° ë ˆì½”ë“œë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ” í•„ë“œì…ë‹ˆë‹¤.</li>
            <li><strong>FK</strong>: Foreign Key(ì™¸ë˜ í‚¤)ë¡œ, ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ë¥¼ ì°¸ì¡°í•˜ëŠ” í•„ë“œì…ë‹ˆë‹¤.</li>
        </ul>
    </div>
    
    <div class="mermaid">
        erDiagram
            Player ||--o{ Score : "has many"
            Player ||--o{ PlayerAchievement : "has many"
            Achievement ||--o{ PlayerAchievement : "belongs to"
            
            Player {
                uuid id PK
                string nickname
                string ip_address
                datetime created_at
                string outfit
                string hat
                string shoes
            }
            
            Score {
                int id PK
                uuid player_id FK
                int score
                int play_time
                int max_stage
                datetime created_at
                int items_collected
                int obstacles_avoided
                int max_combo
            }
            
            Achievement {
                int id PK
                string name
                string description
                string icon
            }
            
            PlayerAchievement {
                int id PK
                uuid player_id FK
                int achievement_id FK
                datetime achieved_at
            }
    </div>
</div>

<div class="section">
    <h2>ì£¼ìš” í…Œì´ë¸” ì„¤ëª…</h2>
    
    <div style="background-color: rgba(0, 221, 255, 0.1); border: 1px solid rgba(0, 221, 255, 0.3); padding: 1rem; margin-bottom: 1.5rem; border-radius: 5px;">
        <h4 style="color: #00DDFF; margin-top: 0;">ğŸ“˜ ë°ì´í„° íƒ€ì… ê°€ì´ë“œ</h4>
        <p>ê° í•„ë“œëŠ” íŠ¹ì • ë°ì´í„° íƒ€ì…ì„ ê°€ì§‘ë‹ˆë‹¤. ì•„ë˜ëŠ” ì£¼ìš” ë°ì´í„° íƒ€ì…ì— ëŒ€í•œ ì„¤ëª…ì…ë‹ˆë‹¤:</p>
        <ul style="column-count: 2; column-gap: 2rem;">
            <li><strong>INTEGER</strong>: ì •ìˆ˜(ìˆ«ì) ê°’</li>
            <li><strong>VARCHAR</strong>: ê°€ë³€ ê¸¸ì´ ë¬¸ìì—´ (ê´„í˜¸ ì•ˆì˜ ìˆ«ìëŠ” ìµœëŒ€ ê¸¸ì´)</li>
            <li><strong>TEXT</strong>: ê¸´ ë¬¸ìì—´ (ê¸¸ì´ ì œí•œ ì—†ìŒ)</li>
            <li><strong>DATETIME</strong>: ë‚ ì§œì™€ ì‹œê°„ ì •ë³´</li>
            <li><strong>BOOLEAN</strong>: ì°¸/ê±°ì§“ ê°’</li>
            <li><strong>UUID</strong>: ë²”ìš© ê³ ìœ  ì‹ë³„ì (128ë¹„íŠ¸ ê°’)</li>
        </ul>
    </div>
    
    <div class="table-card">
        <h3>Player</h3>
        <p>ê²Œì„ í”Œë ˆì´ì–´ì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì…ë‹ˆë‹¤.</p>
        
        <ul class="field-list">
            <li>id <span class="field-type">UUID</span> <span class="field-constraint">PRIMARY KEY</span></li>
            <li>nickname <span class="field-type">VARCHAR(20)</span> <span class="field-constraint">DEFAULT "ìµëª…ì˜ í•™ìƒ"</span></li>
            <li>ip_address <span class="field-type">GenericIPAddressField</span></li>
            <li>created_at <span class="field-type">DATETIME</span> <span class="field-constraint">AUTO_NOW_ADD</span></li>
            <li>outfit <span class="field-type">VARCHAR(50)</span> <span class="field-constraint">DEFAULT "default"</span></li>
            <li>hat <span class="field-type">VARCHAR(50)</span> <span class="field-constraint">DEFAULT "none"</span></li>
            <li>shoes <span class="field-type">VARCHAR(50)</span> <span class="field-constraint">DEFAULT "default"</span></li>
        </ul>
    </div>
    
    <div class="table-card">
        <h3>Score</h3>
        <p>í”Œë ˆì´ì–´ì˜ ê²Œì„ ì ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì…ë‹ˆë‹¤.</p>
        
        <ul class="field-list">
            <li>id <span class="field-type">INTEGER</span> <span class="field-constraint">PRIMARY KEY</span></li>
            <li>player <span class="field-type">UUID</span> <span class="field-constraint">FOREIGN KEY</span></li>
            <li>score <span class="field-type">INTEGER</span> <span class="field-constraint">DEFAULT 0</span></li>
            <li>play_time <span class="field-type">INTEGER</span> <span class="field-constraint">DEFAULT 0</span></li>
            <li>max_stage <span class="field-type">INTEGER</span> <span class="field-constraint">DEFAULT 1</span></li>
            <li>created_at <span class="field-type">DATETIME</span> <span class="field-constraint">AUTO_NOW_ADD</span></li>
            <li>items_collected <span class="field-type">INTEGER</span> <span class="field-constraint">DEFAULT 0</span></li>
            <li>obstacles_avoided <span class="field-type">INTEGER</span> <span class="field-constraint">DEFAULT 0</span></li>
            <li>max_combo <span class="field-type">INTEGER</span> <span class="field-constraint">DEFAULT 0</span></li>
        </ul>
    </div>
    
    <div class="table-card">
        <h3>Achievement</h3>
        <p>ê²Œì„ ì—…ì  ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì…ë‹ˆë‹¤.</p>
        
        <ul class="field-list">
            <li>id <span class="field-type">INTEGER</span> <span class="field-constraint">PRIMARY KEY</span></li>
            <li>name <span class="field-type">VARCHAR(50)</span></li>
            <li>description <span class="field-type">TEXT</span></li>
            <li>icon <span class="field-type">VARCHAR(100)</span> <span class="field-constraint">DEFAULT "default"</span></li>
        </ul>
    </div>

    <div class="table-card">
        <h3>PlayerAchievement</h3>
        <p>í”Œë ˆì´ì–´ë³„ ì—…ì  ë‹¬ì„± ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì…ë‹ˆë‹¤.</p>
        
        <ul class="field-list">
            <li>id <span class="field-type">INTEGER</span> <span class="field-constraint">PRIMARY KEY</span></li>
            <li>player <span class="field-type">UUID</span> <span class="field-constraint">FOREIGN KEY</span></li>
            <li>achievement <span class="field-type">INTEGER</span> <span class="field-constraint">FOREIGN KEY</span></li>
            <li>achieved_at <span class="field-type">DATETIME</span> <span class="field-constraint">AUTO_NOW_ADD</span></li>
            <li><span class="field-constraint">UNIQUE_TOGETHER (player, achievement)</span></li>
        </ul>
    </div>
</div>

<div class="section">
    <h2>ì£¼ìš” ê´€ê³„</h2>
    
    <div style="text-align: center; margin-bottom: 1.5rem; background-color: #1a1a2e; padding: 1rem; border-radius: 8px;">
        <h4 style="color: #FFD700;">ë°ì´í„°ë² ì´ìŠ¤ ê´€ê³„ ìœ í˜•</h4>
        <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 1rem; margin-top: 1rem;">
            <div style="flex: 1; min-width: 200px; padding: 1rem; background-color: rgba(0,0,0,0.2); border-radius: 5px;">
                <h5 style="color: #00DDFF;">ì¼ëŒ€ì¼ (1:1)</h5>
                <div style="font-size: 2rem; margin: 0.5rem 0;">ğŸ”µ â€”â€”â€”â€” ğŸ”µ</div>
                <p style="font-size: 0.9rem;">í•œ í…Œì´ë¸”ì˜ ë ˆì½”ë“œê°€ ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ë ˆì½”ë“œ í•˜ë‚˜ì™€ ì—°ê²°ë©ë‹ˆë‹¤.</p>
            </div>
            <div style="flex: 1; min-width: 200px; padding: 1rem; background-color: rgba(0,0,0,0.2); border-radius: 5px;">
                <h5 style="color: #00DDFF;">ì¼ëŒ€ë‹¤ (1:N)</h5>
                <div style="font-size: 2rem; margin: 0.5rem 0;">ğŸ”µ â€”â€”â€”â€” ğŸ”µğŸ”µğŸ”µ</div>
                <p style="font-size: 0.9rem;">í•œ í…Œì´ë¸”ì˜ ë ˆì½”ë“œê°€ ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ì—¬ëŸ¬ ë ˆì½”ë“œì™€ ì—°ê²°ë©ë‹ˆë‹¤.</p>
            </div>
            <div style="flex: 1; min-width: 200px; padding: 1rem; background-color: rgba(0,0,0,0.2); border-radius: 5px;">
                <h5 style="color: #00DDFF;">ë‹¤ëŒ€ë‹¤ (M:N)</h5>
                <div style="font-size: 2rem; margin: 0.5rem 0;">ğŸ”µğŸ”µ â€”â€”â€”â€” ğŸ”µğŸ”µğŸ”µ</div>
                <p style="font-size: 0.9rem;">ì–‘ìª½ í…Œì´ë¸”ì˜ ë ˆì½”ë“œê°€ ì„œë¡œ ì—¬ëŸ¬ ê°œì™€ ì—°ê²°ë©ë‹ˆë‹¤. ì¤‘ê°„ í…Œì´ë¸”ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>
    
    <div class="relationship-container">
        <div class="relationship-card">
            <h4>Player ì™€ Score</h4>
            <p>í•œ PlayerëŠ” ì—¬ëŸ¬ ê°œì˜ Scoreë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (1:N)</p>
            <p>ì´ ê´€ê³„ëŠ” í•œ í”Œë ˆì´ì–´ê°€ ì—¬ëŸ¬ ë²ˆ ê²Œì„ì„ í”Œë ˆì´í•˜ê³  ì ìˆ˜ë¥¼ ê¸°ë¡í•  ìˆ˜ ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
        </div>
        
        <div class="relationship-card">
            <h4>Player ì™€ PlayerAchievement</h4>
            <p>í•œ PlayerëŠ” ì—¬ëŸ¬ ê°œì˜ PlayerAchievementë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (1:N)</p>
            <p>ì´ ê´€ê³„ëŠ” í•œ í”Œë ˆì´ì–´ê°€ ì—¬ëŸ¬ ê°œì˜ ì—…ì ì„ ë‹¬ì„±í•  ìˆ˜ ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
        </div>
        
        <div class="relationship-card">
            <h4>Achievement ì™€ PlayerAchievement</h4>
            <p>í•œ AchievementëŠ” ì—¬ëŸ¬ ê°œì˜ PlayerAchievementë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (1:N)</p>
            <p>ì´ ê´€ê³„ëŠ” í•œ ì—…ì ì´ ì—¬ëŸ¬ í”Œë ˆì´ì–´ì—ê²Œ ë‹¬ì„±ë  ìˆ˜ ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p>
        </div>
    </div>
</div>

<div class="section">
    <h2>êµ¬í˜„ ì˜ˆì‹œ (Django ëª¨ë¸)</h2>
    
    <div style="background-color: rgba(255, 215, 0, 0.1); border-left: 4px solid #FFD700; padding: 1rem; margin-bottom: 1.5rem; border-radius: 5px;">
        <h4 style="color: #FFD700; margin-top: 0;">ğŸ Django ëª¨ë¸ì´ë€?</h4>
        <p>Django ëª¨ë¸ì€ Python í´ë˜ìŠ¤ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ êµ¬ì¡°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì•„ë˜ ì½”ë“œëŠ” ERD ë‹¤ì´ì–´ê·¸ë¨ì„ ì‹¤ì œ Django ì½”ë“œë¡œ êµ¬í˜„í•œ ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
        <ul>
            <li><strong>models.Model</strong>: Djangoì˜ ê¸°ë³¸ ëª¨ë¸ í´ë˜ìŠ¤ë¡œ, ëª¨ë“  ëª¨ë¸ì´ ìƒì†ë°›ìŠµë‹ˆë‹¤.</li>
            <li><strong>Field íƒ€ì…</strong>: CharField, IntegerField ë“±ì€ ë°ì´í„°ë² ì´ìŠ¤ í•„ë“œì˜ íƒ€ì…ì„ ì •ì˜í•©ë‹ˆë‹¤.</li>
            <li><strong>ForeignKey</strong>: ë‹¤ë¥¸ í…Œì´ë¸”ì„ ì°¸ì¡°í•˜ëŠ” ì™¸ë˜ í‚¤ ê´€ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</li>
            <li><strong>Meta í´ë˜ìŠ¤</strong>: ëª¨ë¸ì˜ ë©”íƒ€ë°ì´í„°(ì •ë ¬, ì œì•½ì¡°ê±´ ë“±)ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</li>
            <li><strong>__str__ ë©”ì„œë“œ</strong>: ëª¨ë¸ ì¸ìŠ¤í„´ìŠ¤ì˜ ë¬¸ìì—´ í‘œí˜„ì„ ì •ì˜í•©ë‹ˆë‹¤.</li>
        </ul>
    </div>
    
    <div class="code-example">
        <pre><code class="python">from django.db import models
import uuid

class Player(models.Model):
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    nickname = models.CharField(max_length=20, default="ìµëª…ì˜ í•™ìƒ")
    ip_address = models.GenericIPAddressField()
    created_at = models.DateTimeField(auto_now_add=True)
    
    # ì»¤ìŠ¤í„°ë§ˆì´ì§• ì •ë³´
    outfit = models.CharField(max_length=50, default="default")
    hat = models.CharField(max_length=50, default="none")
    shoes = models.CharField(max_length=50, default="default")
    
    def __str__(self):
        return f"{self.nickname} ({self.id})"

class Score(models.Model):
    player = models.ForeignKey(Player, on_delete=models.CASCADE)
    score = models.IntegerField(default=0)
    play_time = models.IntegerField(default=0, help_text="í”Œë ˆì´ ì‹œê°„(ì´ˆ)")
    max_stage = models.IntegerField(default=1, help_text="ë„ë‹¬í•œ ìµœëŒ€ ìŠ¤í…Œì´ì§€")
    created_at = models.DateTimeField(auto_now_add=True)
    
    # ê²Œì„ í†µê³„
    items_collected = models.IntegerField(default=0)
    obstacles_avoided = models.IntegerField(default=0)
    max_combo = models.IntegerField(default=0)
    
    class Meta:
        ordering = ['-score']

    def __str__(self):
        return f"{self.player.nickname} - {self.score} ì  ({self.play_time}ì´ˆ)"

class Achievement(models.Model):
    """ê²Œì„ ì—…ì  ì‹œìŠ¤í…œ"""
    name = models.CharField(max_length=50)
    description = models.TextField()
    icon = models.CharField(max_length=100, default="default")
    
    def __str__(self):
        return self.name

class PlayerAchievement(models.Model):
    """í”Œë ˆì´ì–´ë³„ ë‹¬ì„± ì—…ì """
    player = models.ForeignKey(Player, on_delete=models.CASCADE)
    achievement = models.ForeignKey(Achievement, on_delete=models.CASCADE)
    achieved_at = models.DateTimeField(auto_now_add=True)
    
    class Meta:
        unique_together = ('player', 'achievement')
    
    def __str__(self):
        return f"{self.player.nickname} - {self.achievement.name}"</code></pre>
    </div>
</div>

<div class="section">
    <h2>ë°ì´í„° ê´€ê³„ í™œìš© ì˜ˆì‹œ</h2>
    
    <div style="margin: 1rem 0; padding: 0.5rem 1rem; background-color: rgba(0, 221, 255, 0.1); border-radius: 5px;">
        <h4 style="color: #00DDFF;">ğŸ’» í™œìš© ì˜ˆì‹œ ì„¤ëª…</h4>
        <ul>
            <li><strong>ìµœê³  ì ìˆ˜ ì¡°íšŒ</strong>: íŠ¹ì • í”Œë ˆì´ì–´ì˜ ìµœê³  ì ìˆ˜ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.</li>
            <li><strong>ì ìˆ˜ ê¸°ë¡</strong>: í”Œë ˆì´ì–´ì˜ ëª¨ë“  ê²Œì„ í”Œë ˆì´ ê¸°ë¡ì„ ë‚ ì§œìˆœìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.</li>
            <li><strong>ì»¤ìŠ¤í„°ë§ˆì´ì§•</strong>: í”Œë ˆì´ì–´ì˜ ìºë¦­í„° ì»¤ìŠ¤í„°ë§ˆì´ì§• ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.</li>
        </ul>
    </div>
    
    <div class="code-example">
        <pre><code class="python"># í”Œë ˆì´ì–´ì˜ ìµœê³  ì ìˆ˜ ê°€ì ¸ì˜¤ê¸°
def get_player_highscore(player_id):
    return Score.objects.filter(
        player_id=player_id, 
        is_highscore=True
    ).first()

# í”Œë ˆì´ì–´ì˜ ëª¨ë“  ì ìˆ˜ íˆìŠ¤í† ë¦¬ ê°€ì ¸ì˜¤ê¸°
def get_player_score_history(player_id):
    return Score.objects.filter(
        player_id=player_id
    ).order_by('-created_at')

# ì»¤ìŠ¤í„°ë§ˆì´ì§• ì •ë³´ ì—…ë°ì´íŠ¸
def update_player_customization(player_id, outfit, hat, shoes):
    customization, created = Customization.objects.update_or_create(
        player_id=player_id,
        defaults={
            'outfit': outfit,
            'hat': hat,
            'shoes': shoes
        }
    )
    return customization</code></pre>
    </div>
</div>

<!-- ì¶”ê°€: ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€ ì„¹ì…˜ -->
<div class="section">
    <h2>ERDì™€ ê°œë°œ ì—°ê²°í•˜ê¸°</h2>
    
    <p>ì´ ERD êµ¬ì¡°ëŠ” Boo Gameì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤:</p>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
        <div style="background-color: #222; padding: 1.5rem; border-radius: 8px; border-top: 3px solid #00DDFF;">
            <h4 style="color: #00DDFF;">ğŸ† ë¦¬ë”ë³´ë“œ ì‹œìŠ¤í…œ</h4>
            <p>Score í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ìµœê³  ì ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í”Œë ˆì´ì–´ ë­í‚¹ì„ í‘œì‹œí•©ë‹ˆë‹¤.</p>
            <div style="font-style: italic; font-size: 0.9rem; color: #aaa; margin-top: 0.5rem;">
                í™œìš© í…Œì´ë¸”: Player, Score
            </div>
        </div>
        
        <div style="background-color: #222; padding: 1.5rem; border-radius: 8px; border-top: 3px solid #00DDFF;">
            <h4 style="color: #00DDFF;">ğŸ‘• ìºë¦­í„° ì»¤ìŠ¤í„°ë§ˆì´ì§•</h4>
            <p>Player í…Œì´ë¸”ì˜ outfit, hat, shoes í•„ë“œë¥¼ í™œìš©í•˜ì—¬ í”Œë ˆì´ì–´ ìºë¦­í„°ë¥¼ ê¾¸ë°‰ë‹ˆë‹¤.</p>
            <div style="font-style: italic; font-size: 0.9rem; color: #aaa; margin-top: 0.5rem;">
                í™œìš© í…Œì´ë¸”: Player
            </div>
        </div>
        
        <div style="background-color: #222; padding: 1.5rem; border-radius: 8px; border-top: 3px solid #00DDFF;">
            <h4 style="color: #00DDFF;">ğŸ¥‡ ì—…ì  ì‹œìŠ¤í…œ</h4>
            <p>ê²Œì„ ë‚´ íŠ¹ì • ëª©í‘œ ë‹¬ì„± ì‹œ ì—…ì ì„ ë¶€ì—¬í•˜ê³ , í”Œë ˆì´ì–´ë³„ ì—…ì  ë‹¬ì„± í˜„í™©ì„ í‘œì‹œí•©ë‹ˆë‹¤.</p>
            <div style="font-style: italic; font-size: 0.9rem; color: #aaa; margin-top: 0.5rem;">
                í™œìš© í…Œì´ë¸”: Achievement, PlayerAchievement
            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% block version_info %}
<p>ë°ì´í„°ë² ì´ìŠ¤ ERD <span class="version-tag">v1.2.0</span></p>
<p>ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025ë…„ 5ì›” 10ì¼</p>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        mermaid.initialize({
            theme: 'dark',
            logLevel: 'error',
            securityLevel: 'loose',
            startOnLoad: true,
            themeVariables: {
                primaryColor: '#00DDFF',
                primaryTextColor: '#fff',
                primaryBorderColor: '#00DDFF',
                lineColor: '#FFD700',
                secondaryColor: '#1a1a2e',
                tertiaryColor: '#222'
            }
        });
    });
</script>
{% endblock %} 